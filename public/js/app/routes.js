var App, Breadcrumb, Router;

App = window.App;

Breadcrumb = (function() {

  function Breadcrumb() {}

  Breadcrumb.prototype.set = function(name) {
    if ($('.app-breadcrumbs ol.breadcrumb li.active').length === 0) {
      $('.app-breadcrumbs ol.breadcrumb').append("<li class='active'> </li>");
    }
    return $('.app-breadcrumbs ol.breadcrumb li.active').html(name);
  };

  Breadcrumb.prototype.reset = function() {
    return $('.app-breadcrumbs ol.breadcrumb').html('<li><a href="#app/">App Home</a></li>');
  };

  return Breadcrumb;

})();

Router = Backbone.Router.extend({
  routes: {
    ":action": "appRoot",
    "app/": "appRoot",
    "m/:model": "modelByName"
  },
  breadcrumb: new Breadcrumb(),
  toRoot: function() {
    return App.router.navigate("app");
  },
  appRoot: function(action) {
    var ProjectList, mainView;
    ProjectList = App.View.ProjectList;
    mainView = new ProjectList;
    App.core.AppContainer.show(mainView);
    this.breadcrumb.reset();
    return this;
  },
  modelByName: function(uri) {
    var ProjectSummary, model, name, singleModelView;
    model = App.projects.findWhere({
      "uri": uri
    });
    ProjectSummary = App.View.ProjectSummary;
    singleModelView = new ProjectSummary({
      "model": model
    });
    App.core.AppContainer.show(singleModelView);
    name = model.get("name");
    console.log(this);
    this.breadcrumb.set(name);
    return this;
  }
});

App.router = new Router();

// Generated by CoffeeScript 1.5.0-pre
